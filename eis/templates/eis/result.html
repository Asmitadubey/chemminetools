{% extends 'cms/base.html' %}
{% load i18n %}
{% block title %}
<title>Compound Search Result</title>
{% endblock %}
{% block extrahead %}
<script type="text/javascript" src="{{MEDIA_URL}}result.js"></script>
<script type="text/javascript" src="{{MEDIA_URL}}jquery.simplemodal.js"></script>
{% endblock %}

{% block content %}
{% ifequal mode "perm_failure" %}
	<div class="notice">I am sorry, but your query has timed out. You may try refresh this page manually later to see whether it will finally be processed. </div>
{% endifequal %}
{% ifequal mode "error" %}
	<div class="notice">I am sorry, but your query cannot be processed. The error message is: {{error}} </div>
	<div><b>tip:</b> Sometimes, going back and resubmiting the query can rescue a failure case.</div>
{% endifequal %}
{% ifequal mode "ready" %}
<div id="query">
<h2> Query Structure </h2>
<div><img width="200" src="/renderer/{{sid}}"/></div>
</div>
<div id="hits">
<h2>Hits</h2>
<div>
<a class="highlighted button" href="{% url download_search_result sid,"webtools"%}#webtools">Send to Workbench</a>
<a class="highlighted button" href="{% url download_search_result sid,"sdf"%}">Download SDF</a>
<a class="highlighted button" href="{% url download_search_result sid,"smiles"%}">Download SMILES</a>
<form id="pugform" method="post" action="{% url pug_search sid %}">
<p>
You can verify the results in this page by performing the same query using PubChem structure search function.<br/>
</p>
<span>
<label>Similarity Cutoff:</label>
<b>0.</b>
<input type="text" name="cutoff" maxlength="2" size="2"/><br/>
<input type="submit" value="Verify in PubChem"/>
<div style="" class="simplemodal-close"><a href="#">Cancel</a></div>
</span>
</form>
<div style="clear:both">
<form id="structureloadctrl">
<input type="checkbox" id="loadstructures"/><label>Show Compound Structures</label>
</form>
</div></div>
<table class="compounds" width="100%">
{% for compound in compounds %}
	<tr class="compound">
		<td width="20%" style="display:none" class="image" id="cid-{{compound.0}}">  </td>
		<td width="60%" class="summary"><span class="cid">CID {{compound.0}}</span> [<a href="{{extra_dict.COMPOUND_SUMMARY_URL}}{{compound.0}}">PubChem Link</a>]</td>
		<td width="20%" class="distance"> similarity: {{compound.1|floatformat:2}} </td>
	</tr>
{% endfor %}
</table>
</div>
{% endifequal %}
{% endblock %}
