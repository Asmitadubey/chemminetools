{% extends "base.html" %}
{% load cms_tags %}

{% block js_content %}
<script type="text/javascript">
	var structures_loaded = false;
	$(document).ready(function() {
		$('.icon-trash').click(DeleteRow);
		$("[data-toggle=tooltip]").tooltip();

	$("#loadstructures").click(function () {
		if (!structures_loaded) {
			$(this).html('Hide Structures');
			var buf = $(this).text();
			$(".compoundImage").show();
			$(".compoundImageTitle").show();
			$(".compoundImage").each(function() {
				$(this).html('<img width="150" class="img-rounded" src="/compounds/'+ $(this).attr('id')  + '/png"/>');
			});
			structures_loaded = true;
		} else {
			$(this).html('Show Structures');
			structures_loaded = false;
			$(".compoundImage").hide();
			$(".compoundImageTitle").hide();
			$(".compoundImage").each(function() {
				$(this).html('');
			});
		}
	});
	});

	function DeleteRow()
	{
		var compound_id = $(this).parents('tr').first().attr("id");
		$.get("/compounds/" + compound_id + "/delete");
		$(this).parents('tr').first().remove();
	}
</script>
{% endblock %} 

{% block base_content %}
<div class="row-fluid"> 
<div class="span12">
<h2>My Compounds</h2>
</div>
</div><!--/row--> 

<div class="row-fluid">
	<div class="span12">
		<div class="btn-group">
		  <a href="deleteAll"><button class="btn btn-danger">Delete All</button></a>
		  <button id="loadstructures" class="btn">Show Structures</button>
		  <a href="/myCompounds/downloadSDF/"><button class="btn">Download SDF</button></a>
		  <button class="btn">Download Smiles</button>
		</div>
	</div> 
</div><!--/row-->

<div class="row-fluid">


<div class="span12">
{% if matches %}
	<table class="table table-striped">
	<thead>
	<tr>
	<th>CID</th>
	<th>Name</th>
	<th style="display:none" class="compoundImageTitle">Structure</th>
	<th>Smiles</th>
	<th>Options</th>
	<tbody>
	{% for compound in matches %}
		<tr id="{{compound.id}}">
		<th><a href="/compounds/{{compound.id}}">{{compound.cid}}</a></th>
		<th>{{compound.name}}</th>
		<th style="display:none" class="compoundImage" id="{{compound.id}}">  </th>
		<th>{{compound.smiles}}</th>
		<th><i data-toggle="tooltip" placement="top" title="delete this compound" class="icon-trash"></i>
		<a href="#" class="searchRowButton" data-toggle="tooltip" placement="top" title="search similar compounds"><i class="icon-search"></i></a>
		<a href="#" class="editRowButton" data-toggle="tooltip" placement="top" title="edit compound details"><i class="icon-pencil"></i></a>
		</th>
		</tr>
	{% endfor %}
	</tbody>
	</table>
{% else %}
<p>No compounds uploaded.</p>
{% endif %}
</div>


</div><!--/row-->
<div class="row-fluid">
	<div class="span12">
		<div class="pagination pagination-centered">
		<ul>
		<li><a href="#">&laquo;</a></li>
		<li><a href="#">1</a></li>
		<li><a href="#">&raquo;</a></li>
		</ul>
		</div>
	</div> 
</div><!--/row-->
{% endblock %}
